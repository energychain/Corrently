/*!
 * Corrently - Grayscale v5.0.1 (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2018-2018 Start Bootstrap
 * Licensed under MIT
 */
function shortName(t,e){return void 0===t[e]?e==$.qparam("a")?"<span class='second'>this account</span>":e.substr(0,10)+"...":e==$.qparam("a")?"<span class='second'>"+t[e].short_name+"</span>":t[e].short_name}function app(r){document.app={},document.app.provider=ethers.providers.getDefaultProvider("homestead");var t=ethers.providers.getDefaultProvider();$("#account").html(shortName(r,$.qparam("a"))),void 0!==r[$.qparam("a")]&&void 0!==r[$.qparam("a")].description&&$("#description").html(r[$.qparam("a")].description),t.getBalance($.qparam("a")).then(function(t){$("#balance").html((1*ethers.utils.formatEther(t).toString()).toFixed(4))}),$.getJSON("https://api.etherscan.io/api?module=account&action=txlist&address="+$.qparam("a")+"&startblock=6000000&endblock=99999999&sort=asc&apikey=YourApiKeyToken",function(a){a=a.result;var o=[];!function e(){if(0<a.length)x=a.pop(),x.value=ethers.utils.formatEther(x.value),x.timestamp=x.timeStamp,x.to_friendly=shortName(r,x.to),x.from_friendly=shortName(r,x.from),null==window.localStorage.getItem("b_"+x.blockNumber)?$.getJSON("https://min-api.cryptocompare.com/data/pricehistorical?fsym=ETH&tsyms=EUR&ts="+x.timestamp+"&extraParams=corrently",function(t){console.log(t),window.localStorage.setItem("b_"+x.blockNumber,t.ETH.EUR),x.eur=x.value*t.ETH.EUR,o.push(x),e()}):(x.eur=x.value*window.localStorage.getItem("b_"+x.blockNumber),x.rate=window.localStorage.getItem("b_"+x.blockNumber),o.push(x),e());else{console.log(o);for(var t=0;t<o.length;t++)$("#ledgerIt").append("<tr><td title='Block:"+o[t].blockNumber+"'>"+new Date(1e3*o[t].timestamp).toLocaleString()+"</td><td title='"+o[t].from+"'><a href='./ledger_otc.html?a="+o[t].from+"'>"+o[t].from_friendly+"</a></td><td title='"+o[t].to+"'><a href='./ledger_otc.html?a="+o[t].to+"'>"+o[t].to_friendly+"</a></td><td align='right'>"+(1*o[t].value).toFixed(4)+"</td><td align='right'>"+o[t].eur.toFixed(2)+"</td></tr>")}}()}),$.getJSON("https://api.etherscan.io/api?module=account&action=txlistinternal&address="+$.qparam("a")+"&startblock=6000000&endblock=99999999&sort=asc&apikey=YourApiKeyToken",function(a){a=a.result;var o=[];!function e(){if(0<a.length)x=a.pop(),x.value=ethers.utils.formatEther(x.value),x.timestamp=x.timeStamp,x.to_friendly=shortName(r,x.to),x.from_friendly=shortName(r,x.from),null==window.localStorage.getItem("b_"+x.blockNumber)?$.getJSON("https://min-api.cryptocompare.com/data/pricehistorical?fsym=ETH&tsyms=EUR&ts="+x.timestamp+"&extraParams=corrently",function(t){window.localStorage.setItem("b_"+x.blockNumber,t.ETH.EUR),x.eur=x.value*t.ETH.EUR,o.push(x),e()}):(x.eur=x.value*window.localStorage.getItem("b_"+x.blockNumber),x.rate=window.localStorage.getItem("b_"+x.blockNumber),o.push(x),e());else{console.log(o);for(var t=0;t<o.length;t++)$("#ledgerIn").append("<tr><td title='Block:"+o[t].blockNumber+"'>"+new Date(1e3*o[t].timestamp).toLocaleString()+"</td><td title='"+o[t].from+"'><a href='./ledger_otc.html?a="+o[t].from+"'>"+o[t].from_friendly+"</a></td><td title='"+o[t].to+"'><a href='./ledger_otc.html?a="+o[t].to+"'>"+o[t].to_friendly+"</a></td><td align='right'>"+(1*o[t].value).toFixed(4)+"</td><td align='right'>"+o[t].eur.toFixed(2)+"</td></tr>")}}()})}$.qparam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.search);return null!==e&&(e[1]||0)},$(document).ready(function(){$.getJSON("./data/kyc.json",function(t){app(t)})});